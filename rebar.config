{port_env, [
        {"EXE_LDFLAGS", "$ALCOVE_LDFLAGS -lpthread $EXE_LDFLAGS"},
        {"EXE_CFLAGS", "$EXE_CFLAGS $ALCOVE_CFLAGS"}
        ]}.

{port_specs, [
    {"priv/alcove", [
        "c_src/alcove.c",
        "c_src/alcove_cmd.c",
        "c_src/alcove_term.c",
        "c_src/erl_posix_str.c"
    ]}
]}.

{pre_hooks, [
    {compile, "bin/alcove_version.escript c_src/alcove_version.h"},
    {compile, "bin/alcove_cmd.sh c_src/alcove_cmd.proto > c_src/alcove_cmd.h"},
    {compile, "bin/alcove.escript src/alcove.erl c_src/alcove_cmd.proto"}
]}.

{clean_files, [
    "c_src/alcove_cmd.h",
    "c_src/alcove_version.h",
    "src/alcove.erl"
]}.

{xref_checks, [undefined_function_calls]}.
{eunit_opts, [verbose, {report, {eunit_surefire, [{dir, "."}]}}]}.
